= 24/25 5bhif syp - Lecture Notes
Thomas Stütz
1.0.0, {docdate}: Lecture Notes for Courses at HTL Leonding
:icons: font
:experimental:
:sectnums:
ifndef::imagesdir[:imagesdir: images]
:toc:
ifdef::backend-html5[]
// https://fontawesome.com/v4.7.0/icons/
icon:file-text-o[link=https://github.com/2324-4bhif-wmc/2324-4bhif-wmc-lecture-notes/main/asciidocs/{docname}.adoc] ‏ ‏ ‎
icon:github-square[link=https://github.com/2324-4bhif-wmc/2324-4bhif-wmc-lecture-notes] ‏ ‏ ‎
icon:home[link=http://edufs.edu.htl-leonding.ac.at/~t.stuetz/hugo/2021/01/lecture-notes/]
endif::backend-html5[]

== 2024-09-13 http-Filter

* Ein Filter kann den Request überprüfen bzw den Response ändern
* in der Cloud können wir keine Cookies verwenden, da diese am Client liegen. Der Server muss immer in der DB nachschauen (oder der Client müsste immer zum selben Server groutet werden) -> das wäre zu langsam.
** Sticky Session sind nicht optimal, da der LoadBalancer den Client immer zum selben Pod schicken würde.
** Lösungen wie Keycloak verwenden trotzdem Cookies (ist performancemäßig egal, da man sich eh nicht so oft authentifiziert -> ebenfalls DB-Zugriff)


== 2024-09-20

=== container request filter

* Prüft, ob im Header die Authentifizierung (wer bin ich) passt.



...


Problem:

* Die zwei Filter sind unabhängig
* Wir müssen jedoch username und password vom Authentication Filter zum Authorization Filter übergeben
* Dazu verwenden wir den ContainerRequestContext

* https://github.com/2425-5bhif-syp/2425-5bhif-syp-lecture-notes/tree/main/labs[Labs-Ordner im GitHub^]

HÜ:

* Unit-Tests erstellen mit rest-assured
* beim Login Session in DB erstellen (Cookies in DB speichern)
* wir verwenden als DB H2


== 2024-09-27

++++
<iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?si=tko9EBpcJ6kfLPtq&amp;list=PLO-P6W97sI0SHma8SBlKlDP3qYX82PvUu" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
++++

=== Betriebsmodi für Datenbanken

image::betriebsmodi-datenbanken.png



== Aufgabenstellung

* ein User-Tabelle wird erstellt (Password hashen und salten) und auch Session-Tabelle

* eigene Annotation @AllowAll wird erstellt

* Ablauf
** nach Überprüfen des Usernames und Password wird eine Session in die DB eingetragen mit FK auf User
** die Session erhält eine UUID und einen Zeitstempel (Gültigkeit zB 1h)
** die Session wird nun mit Set-Cookie an den Browser gesendet
** die Browser senden nun dieses Cookie bei jedem Request an den Endpoint zurück
** im Authentication-Filter (wer bin ich) wird aus dem Cookie der User durch DB-Zugriff festgestellt.























